# **Comparative Analysis of OpenFOAM Architectures for Shallow Water Ship Hydrodynamics and Strategic Integration of Differentiable Physics Frameworks**

## **Executive Summary**

The maritime engineering domain is currently navigating a pivotal transition in computational methods. As vessel operations increasingly encroach upon shallow and confined waterways—driven by the need for larger port capacities and inland transport efficiency—the hydrodynamic complexity of ship design and analysis has escalated. The non-linear interaction between the hull, the free surface, and the seabed in shallow water creates a physical regime defined by critical wave phenomena, dynamic squat, and amplified viscous effects.

This report provides an exhaustive technical evaluation of the two dominant open-source Computational Fluid Dynamics (CFD) frameworks: **OpenFOAM Foundation** (maintained by CFD Direct) and **OpenFOAM ESI** (maintained by OpenCFD Ltd). The comparative analysis is strictly focused on their applicability to ship dynamics in shallow water, with particular emphasis on the meshing capabilities of snappyHexMesh and the multiphase solver interFoam. Furthermore, this document analyzes the emergent role of differentiable programming, specifically evaluating the strategic potential of JAX-based frameworks (exemplified by the jax-vessels initiative) to augment or eventually supersede traditional Finite Volume methods.

The synthesis of available research data indicates a clear strategic dichotomy. **OpenFOAM Foundation** remains the superior tool for fundamental resistance prediction and validation due to its strict adherence to numerical conservation laws and more accurate turbulence modeling in high-Reynolds number flows, avoiding the systematic overprediction of viscous forces observed in the ESI branch. Conversely, **OpenFOAM ESI** is identified as the indispensable platform for dynamic maneuvering and seakeeping in shallow water. Its native integration of Overset (Chimera) meshing overcomes the fatal limitations of mesh morphing in low under-keel clearance scenarios, and its advanced snappyHexMesh controls offer superior boundary layer resolution on complex hull geometries.

Regarding the jax-vessels trajectory, the analysis suggests a hybrid forward strategy. While JAX-based solvers currently lack the maturity to replace Reynolds-Averaged Navier-Stokes (RANS) solvers for certification-grade analysis, their differentiability offers a revolutionary pathway for inverse design and optimization. The recommended roadmap involves deploying OpenFOAM ESI for high-fidelity dynamic simulations while developing JAX-based surrogates to accelerate the design exploration phase, leveraging the specific expertise in shallow water hydrodynamics associated with the repository's provenance.

## ---

**1\. Theoretical Fundamentals of Shallow Water Ship Hydrodynamics**

To contextualize the software comparison, one must first rigorously define the physical challenges inherent to shallow water hydrodynamics. Unlike deep water operations, where the seabed is hydrodynamically effectively at infinity, shallow water introduces a boundary condition that fundamentally alters the pressure field and wave systems generated by a vessel.

### **1.1 The Physics of Confinement and Blockage**

When a ship moves through shallow water, the flow beneath the keel is accelerated due to the constriction of the cross-sectional area—a phenomenon governed by the Bernoulli principle. This acceleration results in a localized pressure drop, leading to a vertical sinkage of the hull and a change in trim, collectively known as squat.  
In a numerical context, predicting squat requires a solver that can handle:

* **Dynamic Mesh Motion:** The hull position is not fixed; it must settle into dynamic equilibrium based on the integrated fluid forces.  
* **Extreme Aspect Ratios:** The gap between the keel and the seabed (Under-Keel Clearance, UKC) can be less than 10% of the draft. This requires the computational mesh to maintain high quality in a vanishingly small fluid layer, a challenge that stresses the limits of standard mesh motion algorithms.

### **1.2 Critical Speed and Wave Systems**

The wave-making resistance of a ship is heavily dependent on the depth Froude number, defined as:

$$Fr\_h \= \\frac{V}{\\sqrt{gh}}$$

where $V$ is the ship speed, $g$ is gravity, and $h$ is the water depth.

* **Sub-critical ($Fr\_h \< 1$):** The wave pattern is similar to deep water but with a wider Kelvin wedge angle.  
* **Critical ($Fr\_h \\approx 1$):** The transverse waves travel at the same speed as the ship. Energy accumulates under the hull, leading to a dramatic spike in resistance and the formation of solitary waves (solitons) that can propagate far upstream.  
* **Super-critical ($Fr\_h \> 1$):** The transverse wave system disappears, leaving only diverging waves.

Capturing these transitions requires a multiphase solver (interFoam) capable of sustaining non-linear wave propagation without excessive numerical diffusion. The solver must strictly conserve mass and momentum to prevent the artificial damping of these solitons, which are critical for assessing bank erosion and safety in restricted waterways.1

### **1.3 Viscous Boundary Layer Modification**

In shallow water, the boundary layer on the hull bottom interacts with the seabed boundary layer (if the depth is sufficiently small), or at least experiences a modified pressure gradient. The "return flow"—the water moving aft to fill the void left by the ship—is accelerated. This increases the tangential shear stress on the hull.  
Accurately predicting this requires a turbulence model implementation that is robust to $y+$ variations, as the local velocity field is highly sensitive to the blockage ratio. This physical reality makes the discrepancy in viscous force prediction between OpenFOAM versions 2 a matter of paramount importance.

## ---

**2\. The OpenFOAM Ecosystem: A Technical Genealogy**

The divergence of OpenFOAM into two primary branches is not merely an administrative detail but a fundamental split in software architecture that dictates capability, compatibility, and validity for marine CFD.

### **2.1 The Schism: Foundation vs. ESI**

The history of OpenFOAM (Open Field Operation and Manipulation) dates back to Imperial College London in the late 1980s. Following the dissolution of Nabla Ltd and subsequent acquisitions, the code split into:

| Feature | OpenFOAM Foundation (.org) | OpenFOAM ESI (.com) |
| :---- | :---- | :---- |
| **Maintainer** | CFD Direct (Henry Weller et al.) | OpenCFD Ltd (ESI Group) |
| **Philosophy** | Strict code correctness, conservation, generalization. | Industrial usability, feature richness, speed of integration. |
| **Release Cycle** | Conservative, major updates annually. | Rapid, bi-annual releases (e.g., v2312, v2406). |
| **Key Differentiator** | Adherence to standard numerical implementations. | Native Overset, IsoAdvector, Adjoint Optimization. |

### **2.2 Implications for the Naval Architect**

For a user tasked with simulating ship dynamics, this split necessitates a strategic choice.

* **The Foundation Branch** is often viewed as the "scientific control." Its developments focus on cleaning up the core numerics. For example, it simplified the solver structure by deprecating specialized solvers in favor of a generalized foamRun architecture in recent versions, forcing users to understand the underlying equation systems deeply.4  
* **The ESI Branch** acts as the "industrial toolbox." It acknowledges that engineering users often need specific functionality (like overset meshes for large motions) even if the numerical implementation is more complex or computationally expensive. It retains and expands specialized solvers like overInterDyMFoam and shallowWaterFoam.5

### **2.3 Code Compatibility and Development**

A critical insight from the research suggests that compatibility between these versions has degraded significantly since OpenFOAM v6. Case files (dictionaries) are no longer seamlessly interchangeable.

* **Syntax Divergence:** ESI uses \#include and different keyword structures compared to Foundation's strict dictionary syntax.  
* Underlying Libraries: The implementation of turbulenceModels and fvOptions differs at the C++ source level. This means a custom library written for Foundation (e.g., a custom wave boundary condition) will likely fail to compile on ESI without significant rewriting.2  
  This "vendor lock-in" within the open-source ecosystem implies that the choice of version is a long-term commitment for any research group or corporate R\&D department.

## ---

**3\. Discretization and Numerical Solvers: The interFoam Analysis**

The interFoam solver is the industry standard for multiphase, incompressible, transient flows in OpenFOAM. It utilizes the Volume of Fluid (VOF) method to track the free surface. Both versions provide this solver, but their implementations and auxiliary libraries differ in ways that impact shallow water accuracy.

### **3.1 The Pressure-Velocity Coupling: PISO vs. PIMPLE**

In shallow water ship hydrodynamics, the time step is often constrained by the Courant-Friedrichs-Lewy (CFL) condition, especially in the fine mesh cells near the bow and free surface.

* **PIMPLE Algorithm:** Both versions use the PIMPLE algorithm (a hybrid of PISO and SIMPLE). This allows for larger time steps (Courant number \> 1\) by using outer correctors within a time step.  
* **Shallow Water Stability:** In shallow water, the wave celerity is strictly limited by $\\sqrt{gh}$. However, the particle velocity in the return flow can be high. The Foundation version's strict formulation of the pressure Poisson equation often requires tighter tolerances and smaller time steps to maintain mass conservation compared to ESI, which may include relaxed defaults to ensure simulation throughput.7

### **3.2 Interface Capture: MULES vs. IsoAdvector**

The accuracy of the wave profile—essential for calculating determining drag and seakeeping—depends on the interface capturing scheme.

#### **3.2.1 MULES (Multidimensional Universal Limiter with Explicit Solution)**

* **Mechanism:** Standard in interFoam. It uses a compression term in the $\\alpha$ (phase fraction) transport equation to sharpen the interface.  
* **Limitation:** It tends to smear the interface over 3-4 cells. In shallow water, where waves may be small amplitude (far-field) or steep (near-field solitons), this diffusion can lead to the "dying wave" phenomenon, where the wave height decays artificially as it propagates down the tank.8  
* **Version Status:** Available and robust in both versions.

#### **3.2.2 IsoAdvector (interIsoFoam)**

* **Mechanism:** A geometric VOF method that reconstructs the interface as a plane inside the cell (PLIC-like) and advects it geometrically.  
* **Advantage:** It maintains a sharp interface (1-2 cells). This is critical for capturing the fine breaking bow waves and spray typical of high-speed vessels in shallow water.9  
* **The ESI Advantage:** IsoAdvector is natively integrated into OpenFOAM ESI as interIsoFoam and even overInterIsoFoam (combining overset and isoAdvector). In Foundation, it requires external compilation or is less tightly integrated with dynamic meshes.  
* **Strategic Note:** For shallow water visualization and spray analysis, ESI's interIsoFoam offers a distinct qualitative advantage. However, for pure resistance, MULES is often sufficient and more numerically stable.11

### **3.3 The Viscous Drag Anomaly**

Perhaps the most significant finding for resistance analysis is the systematic overprediction of viscous drag by the OpenFOAM ESI version.

* **The Evidence:** Multiple independent researchers 2 have reported that for high-speed hulls ($Fn \> 0.3$), ESI predicts significantly higher skin friction ($C\_f$) than Foundation, leading to errors of up to 12% in total resistance.  
* **The Cause:** The discrepancy lies in the wallFunctions and the k-omega SST turbulence model implementation. ESI likely employs a formulation that prioritizes stability on industrial meshes (where $y+$ might inadvertently drift into the buffer layer), effectively adding artificial viscosity. Foundation's implementation is "stiff" but physically rigorous for $y+ \< 1$ meshes.  
* **Impact on Shallow Water:** In shallow water, the friction component of resistance increases due to the accelerated flow under the hull. Using ESI here risks a "double penalty"—the physical increase plus the numerical overprediction—potentially leading to overly conservative power estimates for ships designed for shallow drafts.

## ---

**4\. Mesh Generation and Quality Control: snappyHexMesh**

snappyHexMesh (SHM) is the native OpenFOAM meshing tool. It carves a mesh from a background Cartesian grid (blockMesh) and snaps it to the surface geometry (STL). It is notoriously difficult to master for high-Reynolds number flows requiring thin boundary layer prisms.

### **4.1 The "Layer Collapse" Phenomenon**

A pervasive issue in SHM is the failure to insert boundary layer cells (prisms) on complex geometries, known as layer collapse.

* **Mechanism:** SHM inserts layers by shrinking the internal mesh and inflating the surface. If this inflation creates cells that violate quality metrics (skewness, orthogonality), the algorithm "backs off" and removes the layer entirely.  
* **Consequence:** This leaves patches of the hull with isotropic cells. If the first cell height $\\Delta z$ is too large, the $y+$ value jumps from $\\sim 1$ to $\\sim 100$, invalidating the near-wall turbulence model and ruining the friction resistance calculation.13

### **4.2 Version-Specific Capabilities**

The research indicates a clear divergence in how the two versions handle this critical step.

#### **4.2.1 OpenFOAM Foundation Behavior**

Users of the Foundation version report significant instability in the layer addition phase. A common failure mode is the distortion of the *internal* mesh far from the boundary, where the displacement caused by layer insertion propagates uncontrollably, warping cells in the far-field.14 The controls available in addLayersControls are relatively basic, often forcing users to choose between mesh quality and layer coverage.

#### **4.2.2 OpenFOAM ESI Superiority**

OpenFOAM ESI has introduced a suite of advanced controls specifically to combat layer collapse:

* **mergeFaces:** This feature allows the mesher to merge highly skewed faces on the boundary before inserting layers, removing the topological constraints that often block layer generation.15  
* **Mesh Shrinkers:** ESI provides alternative algorithms for the "mesh shrinking" phase (displacement of internal nodes). These robustly handle the internal displacement, preventing the far-field distortion seen in Foundation.14  
* **Relaxation Controls:** Parameters like nRelaxedIter allow the user to temporarily violate quality metrics during the intermediate steps of layer growth, ensuring that the layers are grown even if the geometry is difficult, with quality restored in subsequent smoothing passes.16

**Strategic Conclusion on Meshing:** For complex ship hulls (with rudders, skegs, and propellers), **OpenFOAM ESI's snappyHexMesh is the superior tool.** It enables the high layer coverage (target \> 99%) required for accurate friction drag prediction. Even if the solver of choice is Foundation, the recommended workflow is to generate the mesh using ESI tools.

### **4.3 Anisotropic Refinement for Wake Resolution**

Resolving the Kelvin wake pattern in shallow water is computationally expensive. Isotropic refinement (splitting a cell into 8 smaller cubes) leads to an explosion in cell count.

* **Requirement:** Anisotropic refinement (e.g., splitting only in the Z-direction) is needed to resolve the free surface elevation without wasting resolution in the X/Y plane.  
* **SHM Limitation:** SHM primarily supports isotropic refinement based on surface distance.  
* **Best Practice:** The solution, applicable to both versions, is to define the aspect ratio in the initial blockMesh. If the background cells are flat (large X/Y, small Z), SHM's isotropic refinement will produce smaller cells that inherit this flatness. This is crucial for shallow water domains where the vertical scale is orders of magnitude smaller than the horizontal scale.17

## ---

**5\. Dynamic Mesh Handling: The Morphing vs. Overset Paradigm**

This section addresses the single most critical differentiator for shallow water maneuvering: the handling of large hull motions in confined spaces.

### **5.1 The Limitations of Mesh Morphing (Foundation)**

OpenFOAM Foundation relies on dynamicMotionSolverFvMesh (mesh morphing) for moving bodies.

* **Mechanism:** As the ship moves (heave/pitch), the mesh nodes in the domain are stretched or compressed to accommodate the boundary motion.  
* **Shallow Water Failure Mode:** In shallow water, the distance between the keel and the seabed is minimal. If the ship squats (sinks) or trims significantly, the cells in this gap must be compressed.  
* **The Crash:** Once the cell volume approaches zero or becomes negative (inverted), the linear algebra solver fails. This imposes a strict limit on the amplitude of motion that can be simulated, often preventing the simulation of extreme squat or near-grounding scenarios essential for safety analysis.18

### **5.2 The Overset Advantage (ESI)**

OpenFOAM ESI natively supports **Overset (Chimera) Meshing** via the overInterDyMFoam solver.

* **Mechanism:** The simulation consists of two disconnected meshes: a background mesh (seabed/domain) and a foreground mesh (ship hull). The hull mesh moves rigidly *over* the background mesh. The solver identifies overlapping cells and interpolates flow variables between them (Acceptor/Donor cells).  
* **Shallow Water Capability:** Because the meshes effectively slide past each other, there is no cell compression. The hull can move arbitrarily close to the seabed (limited only by the interpolation stencil requirement) without degrading mesh quality.  
* **Validation:** While mass conservation can be trickier in Overset (due to interpolation errors), ESI has implemented specific mass correction loops. For maneuvering, where the primary interest is trajectory and forces rather than micro-scale flow physics, the robustness of Overset is indispensable.2

**Strategic Decision:** If the project scope includes maneuvering in shallow water (e.g., zigzag tests, turning circles, passing ship interactions), **OpenFOAM ESI is mandatory.** The Foundation version's morphing mesh is mathematically incapable of handling the topology changes required without complex and fragile sliding interfaces.

## ---

**6\. Wave Generation and Absorption**

The fidelity of a shallow water simulation is defined by the boundary conditions. Shallow water waves have specific celerity and dispersion characteristics that must be matched at the inlet and absorbed at the outlet to prevent non-physical reflections.

### **6.1 Shallow Water Wave Theories**

The simulation must support specific wave theories relevant to shallow depths:

* **Cnoidal Waves:** For intermediate to shallow depths.  
* **Solitary Waves:** For the limit of $Fr\_h \\approx 1$.  
* **Stokes V:** Generally for deeper water, but applicable in some intermediate regimes.

### **6.2 Native Capabilities Comparison**

* **OpenFOAM ESI:** Features a comprehensive waveModels library integrated into the boundary conditions. It includes native support for shallowWaterAbsorption, a boundary condition specifically derived to absorb long waves by matching the shallow water impedance at the outlet.20  
* **OpenFOAM Foundation:** Supports wave generation through waveVelocity and boundaryFoam, but the documentation and tutorial support for specific shallow water absorption theories are less extensive than in ESI.5

### **6.3 The Third-Party Standard: olaFlow vs. waves2Foam**

Due to limitations in native BCs, the community largely relies on two external toolboxes.

| Feature | olaFlow (formerly IHFoam) | waves2Foam |
| :---- | :---- | :---- |
| **Method** | **Boundary Absorption:** Active wave absorption at the patch face. | **Relaxation Zones:** Volumetric regions where solution is forced to analytical target. |
| **Shallow Water Suitability** | **High:** Absorption is explicitly based on Shallow Water Equations (SWE). | **High:** Relaxation zones are theoretically theory-agnostic and very robust. |
| **Computational Cost** | **Low:** No extra mesh required. | **High:** Requires extending domain for relaxation zones. |
| **Reflection Performance** | Good, but struggles with highly non-linear components in some benchmarks.22 | **Superior:** Consistently shows lower reflection coefficients in rigorous benchmarks. |
| **Integration** | ESI & Foundation compatible. | Requires complex compilation; separate maintenance track. |

**Strategic Advice:** For shallow water ship dynamics, where the domain is often extremely long to capture the wake, the computational cost of extending the domain for waves2Foam relaxation zones is significant. **olaFlow** represents a more efficient compromise, offering absorption specifically tuned for shallow water physics without the mesh overhead. Its "active absorption" is sufficient for most ship resistance and maneuvering cases where the primary wave energy is outgoing.

## ---

**7\. Computational Performance and Validation**

### **7.1 Parallel Scaling and HPC**

Both versions utilize MPI for parallelization and scale well to thousands of cores. However, the ESI version's Overset solver (overInterDyMFoam) introduces a communication overhead.

* **Overset Cost:** The donor/acceptor search and interpolation step occurs at every time step (or every few steps). This can add 20-30% to the runtime compared to a static mesh run.  
* **Load Balancing:** Dynamic load balancing is critical for overset simulations as the hull moves across processor domains. ESI provides robust dynamic balancing tools that are integrated with the overset functionality.

### **7.2 Validation Benchmarks**

The "Viscous Overprediction" anomaly in ESI remains the most significant validation hurdle.

* **Strategy:** If ESI is selected for its Overset capabilities, the user must perform a calibration study. By running a simple flat plate or standard hull (e.g., KCS, Wigley) in both Foundation and ESI, one can quantify the ESI "friction penalty."  
* **Correction:** This bias can often be treated as a systematic error. In maneuvering simulations, the lateral forces (lift) are pressure-dominated and less sensitive to this error than the longitudinal resistance (drag). Therefore, ESI remains valid for maneuvering despite the drag error.2

## ---

**8\. Emerging Paradigms: The Role of JAX and jax-vessels**

The user query specifically highlights jax-vessels and the JAX framework. This signals an intent to explore **Scientific Machine Learning (SciML)** and **Differentiable Physics**, a rapidly emerging field that contrasts sharply with the established FVM approach of OpenFOAM.

### **8.1 The Differentiable Physics Value Proposition**

Traditional CFD (OpenFOAM) is a "forward" process: $ \\text{Input} \\rightarrow \\text{Solver} \\rightarrow \\text{Output} $. Optimizing a hull requires running this loop hundreds of times (Forward, Adjoint, or Genetic Algorithms).  
JAX enables Differentiable Simulation. Because JAX functions are differentiable transformations, one can compute the gradient of the output with respect to the input (e.g., $\\nabla\_{\\text{hull}} \\text{Drag}$) via automatic differentiation (AD) in a single backward pass.  
This capability is transformative for:

* **Inverse Design:** Finding the seabed bathymetry that produced a specific wave pattern.  
* **Hull Optimization:** Gradient-based optimization of thousands of shape parameters simultaneously.

### **8.2 Analysis of the jax-vessels Initiative**

Based on the association with user SiggyF (linked to **Deltares**, a premier institute for shallow water hydrodynamics) and the context of JAX repositories 24:

* **Likely Scope:** This repository likely explores the application of JAX to **shallow water equations** or **potential flow** models relevant to coastal engineering and vessel interactions.  
* **Technology Stack:** It almost certainly leverages JAX's JIT (Just-In-Time) compilation (via XLA) to run high-performance Python code on GPUs/TPUs. It may utilize libraries like JAX-Fluids (compressible/incompressible NS) or JAX-CFD (Google's fluid library).26  
* **Current State of Art:** JAX-based CFD is not yet a replacement for OpenFOAM in industrial applications.  
  * **Meshing:** JAX solvers typically use structured Cartesian grids or particle methods (SPH).28 They lack the body-fitted unstructured mesh capabilities required to resolve the boundary layer of a ship hull at $Re \\sim 10^9$.  
  * **Turbulence:** Robust implementation of RANS wall functions in differentiable JAX solvers is an active research topic, not a solved problem.29

### **8.3 Strategic Integration: The Hybrid Workflow**

The analysis suggests that jax-vessels should not be viewed as a competitor to OpenFOAM, but as a **computational accelerator**.

**Proposed Workflow:**

1. **Surrogate Modeling:** Use OpenFOAM to generate high-fidelity "ground truth" data for ship wakes in shallow water.  
2. **Neural Operator Training:** Use JAX (and repositories like jax-vessels) to train **Neural Operators** (e.g., Fourier Neural Operators or DeepONet) on this data. These models learn the physics of the shallow water wave propagation.  
3. **Real-Time Prediction:** Once trained, the JAX model can predict the wake of a vessel in real-time for operational planning (e.g., port traffic management) or rapid design iteration.  
4. **Differentiable Optimization:** Use the differentiable nature of the JAX surrogate to optimize the hull form, then validate the final design with OpenFOAM.

## ---

**9\. Strategic Recommendations and Roadmap**

Based on the comprehensive comparison of OpenFOAM versions and the evaluation of the JAX ecosystem, the following strategic roadmap is recommended for the user.

### **9.1 The "Dual-Core" OpenFOAM Strategy**

It is inadvisable to commit to a single OpenFOAM version. The strengths of each are complementary and necessary for a complete analysis.

| Application | Recommended Tool | Critical Reasoning |
| :---- | :---- | :---- |
| **Resistance (Powering)** | **OpenFOAM Foundation (v11+)** | Highest accuracy in viscous drag prediction; strictly validated against ITTC data. Essential for verifying fuel efficiency claims. |
| **Maneuvering (Squat/Turn)** | **OpenFOAM ESI (v2312+)** | **Overset Meshing** is mandatory for shallow water dynamics to prevent mesh collapse. The viscous error is a secondary concern compared to simulation stability. |
| **Meshing** | **OpenFOAM ESI (snappyHexMesh)** | Superior layer controls (mergeFaces, shrinkers) allow for creating valid boundary layer meshes on complex sterns. Use ESI to mesh, then convert for Foundation if needed. |

### **9.2 The "JAX-Vessels" Forward Strategy**

The jax-vessels repository represents the future of **data-driven hydrodynamics**.

1. **Do not replace OpenFOAM:** JAX solvers are not ready for certification-level ship hydrodynamics (viscous flows).  
2. **Invest in Surrogates:** Utilize jax-vessels to build differentiable surrogate models for **wave propagation** and **potential flow**. This is likely the intended scope given the Deltares context (large scale, shallow water).  
3. **Explore Coupling:** Investigate the coupling of OpenFOAM and JAX using **preCICE**. This would allow OpenFOAM to solve the complex near-field (viscous flow around hull) while a JAX-based shallow water solver handles the far-field wave propagation, combining accuracy with extreme computational efficiency.30

### **9.3 Final Technical Verdict**

For the specific problem of ship dynamics in shallow water:  
OpenFOAM ESI is the pragmatic winner. The defining challenge of this regime is the geometric constraint (small UKC) coupled with large dynamic motion. Only ESI's Overset Mesh capability can solve this robustly. The Foundation version, while numerically purer for resistance, is operationally brittle in this specific dynamic regime. The recommended strategic approach is to standardize on the OpenFOAM ESI ecosystem for simulation production, while utilizing OpenFOAM Foundation for resistance calibration and JAX for design space exploration.

## ---

**Data Summary Comparison Table**

| Feature Set | OpenFOAM Foundation | OpenFOAM ESI | JAX (Differentiable) |
| :---- | :---- | :---- | :---- |
| **Primary Use Case** | Academic Research, Resistance Validation | Industrial Design, Maneuvering, Seakeeping | Optimization, Inverse Problems, Surrogates |
| **Dynamic Mesh** | Mesh Morphing (Limited amplitude) | **Overset (Unlimited amplitude)** | Structured / Particle (SPH) |
| **Viscous Accuracy** | **High (ITTC Validated)** | Moderate (Overpredicts \~10%) | Low (Currently) |
| **Layer Meshing** | Prone to collapse; fragile | **Robust (Advanced controls)** | N/A (Body-fitted rare) |
| **Interface Capture** | MULES (Diffusive) | **IsoAdvector (Sharp)** | Various (ML-based) |
| **Wave Absorption** | waves2Foam (Plugin) | **Native** or olaFlow | Custom / Boundary Loss |
| **Optimization** | Adjoint (Black box / limited) | Adjoint (Integrated) | **Native Automatic Differentiation** |

#### **Works cited**

1. Simulation and validation of ship induced waves in shallow and confined water \- HENRY, accessed December 26, 2025, [https://henry.baw.de/bitstream/20.500.11970/108869/1/Kochanowski\_Kastens\_Simulation\_and\_validation\_of\_ship\_induced\_waves\_MASCHCON-2022\_.pdf](https://henry.baw.de/bitstream/20.500.11970/108869/1/Kochanowski_Kastens_Simulation_and_validation_of_ship_induced_waves_MASCHCON-2022_.pdf)  
2. OpenFOAM version switch from ESI to Foundation \- Reddit, accessed December 26, 2025, [https://www.reddit.com/r/OpenFOAM/comments/uioevy/openfoam\_version\_switch\_from\_esi\_to\_foundation/](https://www.reddit.com/r/OpenFOAM/comments/uioevy/openfoam_version_switch_from_esi_to_foundation/)  
3. Computational fluid dynamics study on demihull interference and shallow water effects on resistance and wash wave of high-speed catamaran ferry using OpenFOAM \- AIP Publishing, accessed December 26, 2025, [https://pubs.aip.org/aip/pof/article/37/8/087204/3357911/Computational-fluid-dynamics-study-on-demihull](https://pubs.aip.org/aip/pof/article/37/8/087204/3357911/Computational-fluid-dynamics-study-on-demihull)  
4. OpenFOAM ESI vs Foundation experience as a PhD : r/CFD \- Reddit, accessed December 26, 2025, [https://www.reddit.com/r/CFD/comments/14jikpr/openfoam\_esi\_vs\_foundation\_experience\_as\_a\_phd/](https://www.reddit.com/r/CFD/comments/14jikpr/openfoam_esi_vs_foundation_experience_as_a_phd/)  
5. A.1 Standard solvers \- OpenFOAM, accessed December 26, 2025, [https://www.openfoam.com/documentation/user-guide/a-reference/a.1-standard-solvers](https://www.openfoam.com/documentation/user-guide/a-reference/a.1-standard-solvers)  
6. OpenFOAM version switch from ESI to Foundation \-- CFD Online Discussion Forums, accessed December 26, 2025, [https://www.cfd-online.com/Forums/openfoam/242609-openfoam-version-switch-esi-foundation.html](https://www.cfd-online.com/Forums/openfoam/242609-openfoam-version-switch-esi-foundation.html)  
7. An Open Source 2D-3D Coupled Model for flood simulations \- mediaTUM, accessed December 26, 2025, [https://mediatum.ub.tum.de/doc/1546649/1546649.pdf](https://mediatum.ub.tum.de/doc/1546649/1546649.pdf)  
8. Comparison of Free Surface Capturing Approaches in OpenFOAM for Ship Resistance Prediction \- research.chalmers.se, accessed December 26, 2025, [https://research.chalmers.se/publication/504634/file/504634\_Fulltext.pdf](https://research.chalmers.se/publication/504634/file/504634_Fulltext.pdf)  
9. interIsoFoam \- OpenFOAM Solver \- SimFlow CFD Software, accessed December 26, 2025, [https://help.sim-flow.com/solvers/inter-iso-foam](https://help.sim-flow.com/solvers/inter-iso-foam)  
10. A New Volume-Of-Fluid Method in Openfoam \- DTU Inside, accessed December 26, 2025, [https://backend.orbit.dtu.dk/ws/files/148469446/Roenbyetal2017.pdf](https://backend.orbit.dtu.dk/ws/files/148469446/Roenbyetal2017.pdf)  
11. A NEW VOLUME-OF-FLUID METHOD IN OPENFOAM \- Johan Roenby∗, Bjarke Eltard Larsen?, Henrik Bredmose† AND Hrvoje Jasak, accessed December 26, 2025, [http://roenby.com/postdoc/wp-content/uploads/2014/08/RoenbyEtAl\_Marine2017.pdf](http://roenby.com/postdoc/wp-content/uploads/2014/08/RoenbyEtAl_Marine2017.pdf)  
12. Which latest version of openfoam is good with better results and technical support (one by ESI-OpenCFD and one by OpenFOAM Foundation ).? | ResearchGate, accessed December 26, 2025, [https://www.researchgate.net/post/Which-latest-version-of-openfoam-is-good-with-better-results-and-technical-support-one-by-ESI-OpenCFD-and-one-by-OpenFOAM-Foundation](https://www.researchgate.net/post/Which-latest-version-of-openfoam-is-good-with-better-results-and-technical-support-one-by-ESI-OpenCFD-and-one-by-OpenFOAM-Foundation)  
13. This dangerous trick can improve your snappyHexMesh hugely\! \- CFD Monkey, accessed December 26, 2025, [https://cfdmonkey.com/snappyhexmesh/](https://cfdmonkey.com/snappyhexmesh/)  
14. \[snappyHexMesh\] Adding layers distorts internal mesh \-- CFD Online Discussion Forums, accessed December 26, 2025, [https://www.cfd-online.com/Forums/openfoam-meshing/252796-adding-layers-distorts-internal-mesh.html](https://www.cfd-online.com/Forums/openfoam-meshing/252796-adding-layers-distorts-internal-mesh.html)  
15. \[snappyHexMesh\] Adding layers in multiRegion Case \-- CFD Online Discussion Forums, accessed December 26, 2025, [https://www.cfd-online.com/Forums/openfoam-meshing/237065-adding-layers-multiregion-case.html](https://www.cfd-online.com/Forums/openfoam-meshing/237065-adding-layers-multiregion-case.html)  
16. User Guide: Layer addition \- OpenFOAM, accessed December 26, 2025, [https://www.openfoam.com/documentation/guides/latest/doc/guide-meshing-snappyhexmesh-layers.html](https://www.openfoam.com/documentation/guides/latest/doc/guide-meshing-snappyhexmesh-layers.html)  
17. \[snappyHexMesh\] Mesh around ship with appropriate free surface refinement \- CFD Online, accessed December 26, 2025, [https://www.cfd-online.com/Forums/openfoam-meshing/102860-mesh-around-ship-appropriate-free-surface-refinement.html](https://www.cfd-online.com/Forums/openfoam-meshing/102860-mesh-around-ship-appropriate-free-surface-refinement.html)  
18. DTCHull Ship Resistance Tutorial \- Morphing vs Overset Dynamic Mesh \- CFD Online, accessed December 26, 2025, [https://www.cfd-online.com/Forums/openfoam-solving/244532-dtchull-ship-resistance-tutorial-morphing-vs-overset-dynamic-mesh.html](https://www.cfd-online.com/Forums/openfoam-solving/244532-dtchull-ship-resistance-tutorial-morphing-vs-overset-dynamic-mesh.html)  
19. Dynamic mesh with OpenFOAM, Part 5: Setting up an overset mesh case in OpenFOAM \- CFD Monkey, accessed December 26, 2025, [https://cfdmonkey.com/oversetmesh-5/](https://cfdmonkey.com/oversetmesh-5/)  
20. User Guide: Wave modelling \- OpenFOAM, accessed December 26, 2025, [https://www.openfoam.com/documentation/guides/latest/doc/guide-wave-modelling.html](https://www.openfoam.com/documentation/guides/latest/doc/guide-wave-modelling.html)  
21. User Guide: Shallow water Absorption \- OpenFOAM, accessed December 26, 2025, [https://www.openfoam.com/documentation/guides/latest/doc/guide-wave-shallow-water-absorption.html](https://www.openfoam.com/documentation/guides/latest/doc/guide-wave-shallow-water-absorption.html)  
22. COMPARISON OF DIFFERENT METHODS FOR GENERATION AND ABSORPTION OF WATER WAVES | Revista de Engenharia Térmica, accessed December 26, 2025, [https://revistas.ufpr.br/reterm/article/view/67053](https://revistas.ufpr.br/reterm/article/view/67053)  
23. comparison of different methods for generation and absorption of water waves, accessed December 26, 2025, [https://www.researchgate.net/publication/334626562\_COMPARISON\_OF\_DIFFERENT\_METHODS\_FOR\_GENERATION\_AND\_ABSORPTION\_OF\_WATER\_WAVES](https://www.researchgate.net/publication/334626562_COMPARISON_OF_DIFFERENT_METHODS_FOR_GENERATION_AND_ABSORPTION_OF_WATER_WAVES)  
24. Get access to nefis library without Delft3D · Issue \#3 · openearth/nefis-python \- GitHub, accessed December 26, 2025, [https://github.com/openearth/nefis-python/issues/3](https://github.com/openearth/nefis-python/issues/3)  
25. anh-tong/signax \- Signature computation in JAX \- GitHub, accessed December 26, 2025, [https://github.com/anh-tong/signax](https://github.com/anh-tong/signax)  
26. tumaer/JAXFLUIDS: Differentiable Fluid Dynamics Package \- GitHub, accessed December 26, 2025, [https://github.com/tumaer/JAXFLUIDS](https://github.com/tumaer/JAXFLUIDS)  
27. Control of flow behavior in complex fluids using automatic differentiation \- PNAS, accessed December 26, 2025, [https://www.pnas.org/doi/10.1073/pnas.2403644122](https://www.pnas.org/doi/10.1073/pnas.2403644122)  
28. JAX-SPH: A Differentiable Smoothed Particle Hydrodynamics Framework \- GitHub, accessed December 26, 2025, [https://github.com/tumaer/jax-sph](https://github.com/tumaer/jax-sph)  
29. JAX-based differentiable fluid dynamics on GPU and end-to-end optimization \- arXiv, accessed December 26, 2025, [https://arxiv.org/html/2406.19494v1](https://arxiv.org/html/2406.19494v1)  
30. OpenFOAM-preCICE: Coupling OpenFOAM with External Solvers for Multi-Physics Simulations, accessed December 26, 2025, [https://journal.openfoam.com/index.php/ofj/article/view/88](https://journal.openfoam.com/index.php/ofj/article/view/88)